<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Social Login</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    body {
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .card {
      max-width: 420px;
      width: 100%;
      border-radius: 16px;
      backdrop-filter: blur(10px);
      background-color: rgba(255, 255, 255, 0.85);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.18);
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
    }
    
    .avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    
    .avatar:hover {
      transform: scale(1.05);
    }
    
    .fb-btn {
      background-color: #1877f2;
      color: white;
      transition: all 0.3s ease;
    }
    
    .fb-btn:hover {
      background-color: #165ec9;
      color: white;
      transform: translateY(-2px);
    }
    
    .ms-btn {
      background-color: #2f2f2f;
      color: white;
      transition: all 0.3s ease;
    }
    
    .ms-btn:hover {
      background-color: #1a1a1a;
      color: white;
      transform: translateY(-2px);
    }
    
    .google-btn {
      background-color: #db4437;
      color: white;
      transition: all 0.3s ease;
    }
    
    .google-btn:hover {
      background-color: #c23321;
      color: white;
      transform: translateY(-2px);
    }
    
    .btn-logout {
      transition: all 0.3s ease;
    }
    
    .btn-logout:hover {
      transform: translateY(-2px);
    }
    
    .social-icon {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    
    @keyframes floating {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0px); }
    }
  </style>
</head>
<body>
<div class="card shadow-sm p-4 animate__animated animate__fadeIn">
  {% if user %}
    <div class="text-center mb-4">
      {% if user.picture %}
        <!-- Google / Microsoft (URL string) -->
        {% if user.picture is string %}
          <img src="{{ user.picture }}" alt="Profile" class="avatar mb-3 floating">
        {% elif user.picture.data and user.picture.data.url %}
          <!-- Facebook (nested object) -->
          <img src="{{ user.picture.data.url }}" alt="Profile" class="avatar mb-3 floating">
        {% endif %}
      {% endif %}

      <h5 class="animate__animated animate__fadeInUp">
        {{ user.displayName if user.displayName else user.name }}
      </h5>
      <p class="text-muted animate__animated animate__fadeInUp animate__delay-1s">
        {{ user.mail if user.mail else user.email }}
      </p>
    </div>
    <div class="d-grid">
      <a href="/logout" class="btn btn-outline-secondary btn-logout animate__animated animate__fadeInUp animate__delay-2s">
        Logout
      </a>
    </div>
  {% else %}
    <div class="text-center mb-4">
      <div class="floating animate__animated animate__fadeIn">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-person-circle text-primary" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
          <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
        </svg>
      </div>
      <h4 class="mt-3 animate__animated animate__fadeInUp">Login with Social Accounts</h4>
      <p class="text-muted animate__animated animate__fadeInUp animate__delay-1s">Sign in to continue</p>
    </div>
    <div class="d-grid gap-3 animate__animated animate__fadeInUp animate__delay-2s">
      <a href="/login/google" class="btn google-btn py-2 pulse">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" class="social-icon">
        Login with Google
      </a>
      <a href="/login/facebook" class="btn fb-btn py-2 pulse">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" class="social-icon">
        Login with Facebook
      </a>
      <a href="/login/microsoft" class="btn ms-btn py-2 pulse">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" class="social-icon">
        Login with Microsoft
      </a>
    </div>
  {% endif %}
</div>

<script>
  // Add ripple effect to buttons
  document.querySelectorAll('.btn').forEach(button => {
    button.addEventListener('click', function(e) {
      let x = e.clientX - e.target.getBoundingClientRect().left;
      let y = e.clientY - e.target.getBoundingClientRect().top;
      
      let ripple = document.createElement('span');
      ripple.classList.add('ripple');
      ripple.style.left = `${x}px`;
      ripple.style.top = `${y}px`;
      this.appendChild(ripple);
      
      setTimeout(() => {
        ripple.remove();
      }, 1000);
    });
  });
</script>
</body>
</html>